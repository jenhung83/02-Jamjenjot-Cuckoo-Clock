<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="icon"
            href="https://emojiguide.org/images/emoji/2/vjw710gz4dp2.png"
        />
        <!-- remove the warning alert in console -->
        <link rel="shortcut icon" href="#" />
        <!-- my css -->
        <link rel="stylesheet" href="./style/jenStyle.css" />
        <title>@Jamjenjot Cuckoo Clock</title>
    </head>
    <body>
        <div class="text">
            <h1>Christmas is Coming</h1>
            <div>
                According to Wikipedia, a cuckoo clock is, typically, a pendulum
                clock that strikes the hours with a sound like a common cuckoo
                call and has an automated cuckoo bird that moves with each note.
                Some move their wings and open and close their beaks while
                leaning forwards, whereas others have only the bird's body
                leaning forward. The mechanism to produce the cuckoo call has
                been in use since the middle of the 1700s and has remained
                almost without variation.
            </div>
            <div>
                It is unknown who invented the cuckoo clock and where the first
                one was made. It is thought that much of its development and
                evolution was made in the Black Forest area in southwestern
                Germany (in the modern state of Baden-WÃ¼rttemberg), the region
                where the cuckoo clock was popularized. These clocks were
                exported to the rest of the world from the mid-1850s on. Today,
                the cuckoo clock is one of the favourite souvenirs of travellers
                in Germany, Switzerland, Austria, and northeastern France. It
                has become a cultural icon of Germany.
            </div>
        </div>
        <div class="clock">
            <div class="houseGroup">
                <div class="clock-face">
                    <ul>
                        <li>12</li>
                        <li>3</li>
                        <li>6</li>
                        <li>9</li>
                    </ul>
                    <div class="second-hand"></div>
                    <div class="min-hand"></div>
                    <div class="hour-hand"></div>
                </div>
                <img
                    class="clock__house"
                    src="./img/gingerbread house-01.svg"
                    alt=""
                />
            </div>
            <div class="clock__weights">
                <img
                    class="clock__weightLeft"
                    src="./img/gingerbread house-02.svg"
                    alt=""
                />
                <img
                    class="clock__weightRight"
                    src="./img/gingerbread house-02.svg"
                    alt=""
                />
            </div>
            <img
                class="clock__pendulum"
                src="./img/gingerbread house-03.svg"
                alt=""
            />
            <img
                class="clock__bird"
                src="./img/gingerbread house-04.svg"
                alt=""
            />

            <button>Cuckoo!</button>
        </div>
        <script>
            (function () {
                const secondHand = document.querySelector(".second-hand");
                const minHand = document.querySelector(".min-hand");
                const hourHand = document.querySelector(".hour-hand");

                const btn = document.querySelector("button");
                const bird = document.querySelector(".clock__bird");
                const audio = new Audio(
                    "./Cuckoo Clock-SoundBible.com-1776874523.mp3"
                );
                audio.volume = 0.1;

                // time function
                function setTime() {
                    // const now = new Date("December 17, 1995 11:54:39");
                    const now = new Date();
                    const seconds = now.getSeconds();
                    const minutes = now.getMinutes();
                    const hours =
                        now.getHours() > 12
                            ? Math.abs(now.getHours() - 12)
                            : now.getHours();

                    const secondRotateDegrees = (360 / 60) * seconds - 90;
                    secondHand.style.transform = `rotate(${secondRotateDegrees}deg)`;

                    const minRotateDegrees = (360 / 60) * minutes - 90;
                    minHand.style.transform = `rotate(${minRotateDegrees}deg)`;

                    const hourRotateDegrees =
                        (360 / 12) * hours + (360 / 12 / 60) * minutes - 90;
                    hourHand.style.transform = `rotate(${hourRotateDegrees}deg)`;

                    // cuckoo on the hour
                    if (now.getMinutes() === 59 && now.getSeconds() === 59) {
                        cuckoo();
                    }
                }

                // cuckoo bird function
                function cuckoo() {
                    //bird pop out
                    bird.classList.add("cuckoo");
                    //play cuckoo sound
                    setTimeout(() => {
                        audio.play();
                    }, 800);
                    setTimeout(() => {
                        bird.classList.remove("cuckoo");
                    }, 2500);
                }

                // actions
                setInterval(setTime, 100);
                btn.addEventListener("click", function () {
                    cuckoo();
                });
            })();
        </script>
    </body>
</html>
